
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NestCRM</title>
  <meta name="description" content="Lovable Generated Project" />
  <meta name="author" content="Lovable" />
  <meta property="og:image" content="/og-image.png" />
  <!-- SPA routing fix for subdomain handling -->
  <script>
    // This helps ensure proper SPA routing on subdomains
    (function() {
      // Handle 404s in production by redirecting to index.html
      if (window.location.pathname !== '/' && !window.location.pathname.includes('.')) {
        if (document.querySelector('body > div#root').childElementCount === 0) {
          console.log('Fixing SPA routing for path:', window.location.pathname);
          // We're on a direct URL that should be handled by the SPA router
          window.history.replaceState(null, '', window.location.pathname);
        }
      }
      
      // Special handling for cross-domain authentication
      // This helps with Supabase auth cookie issues when redirecting between domains
      const hasAuthParam = window.location.search.includes('auth_redirect');
      if (hasAuthParam) {
        console.log('Detected cross-domain auth redirect, initializing auth state...');
        // Will be handled by AuthContext initialization
      }
    })();
  </script>
</head>

<body>
  <div id="root"></div>
  <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
  <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
  <script type="module" src="/src/main.tsx"></script>
</body>

</html>
